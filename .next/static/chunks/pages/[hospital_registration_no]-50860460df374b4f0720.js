(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[246],{153:function(e,t,n){"use strict";var a,o=n(168),s=n(2568),i=n(6573),l=n.n(i),r=n(5893);t.Z=function(){return(0,r.jsx)("div",{className:"d-flex xd",style:{position:"fixed",height:"100vh",width:"100vw",background:"linear-gradient(0deg, rgba(72,216,217,0.7) 0%, rgba(52,58,64,0.9) 96%)",zIndex:1100,backdropFilter:"blur(3px)"},children:(0,r.jsx)(l(),{css:(0,s.css)(a||(a=(0,o.Z)(["\n\t\t\t\t\tmargin: auto auto;\n\t\t\t\t"]))),speedMultiplier:2,color:"white"})})}},4235:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return v}});var a=n(5861),o=n(7757),s=n.n(o),i=n(385),l=n(5675),r=n(9008),c=n(7294),d=n(9755),u=n.n(d),m=n(1163),h=n(4598),p=n(5835),b=n(153),f=n(227),g=n(5893),x=n(4155),v=!0;t.default=function(e){var t=e.hospitalInfo,n=JSON.parse(t),o=(0,c.useState)(!1),d=o[0],v=o[1],j=n.address.latitude&&n.address.longitude?"https://www.google.com/maps/embed/v1/place?key="+x.env.NEXT_PUBLIC_GMAPS_KEY+"&q="+n.address.latitude+","+n.address.longitude+"&zoom=16":"https://www.google.com/maps/embed/v1/place?key="+x.env.NEXT_PUBLIC_GMAPS_KEY+"&q="+n.hospital_name.replace(/ /g,"+")+"&zoom=16",N=(0,c.useState)(j),_=N[0],w=N[1],k=(0,c.useState)(!0),y=k[0],T=k[1],S=(0,c.useState)(null),C=S[0],E=S[1],P=(0,c.useContext)(f.S).userContext;return console.log(n.address,j),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(r.default,{children:(0,g.jsx)("title",{children:n.hospital_name+" | Quick Hospitalization"})}),P?(0,g.jsx)("section",{className:"modal fade",id:"bookingModal",tabIndex:-1,"data-bs-backdrop":!1,"data-bs-keyboard":"false",children:(0,g.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-lg",children:(0,g.jsxs)("div",{className:"modal-content",style:{backgroundColor:"rgba(256, 256, 256, 0.85)",backdropFilter:"blur(8px)"},children:[(0,g.jsxs)("div",{className:"modal-header py-1",children:[(0,g.jsx)("h5",{className:"modal-title",children:"Booking"}),(0,g.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),(0,g.jsx)("div",{className:"modal-body",children:(0,g.jsx)("form",{className:"appointment-form container",onSubmit:function(e){e.stopPropagation(),e.preventDefault()},children:(0,g.jsx)("fieldset",{children:(0,g.jsxs)("div",{className:"row g-2",children:[(0,g.jsx)("div",{className:"col-lg",children:(0,g.jsxs)("div",{className:"form-floating",children:[(0,g.jsx)("select",{className:"form-select",id:"bookingFor",onInput:function(e){e.target.value==i.booking_booked_for.Self?(T(!0),u()("#patientName").val(P.name),u()("#patientSex").val(P.sex)):(T(!1),u()("#patientName").val(""),u()("#patientSex").val("null"))},required:!0,children:Object.keys(i.booking_booked_for).map((function(e,t){return(0,g.jsx)("option",{value:i.booking_booked_for[e],children:i.booking_booked_for[e]},t)}))}),(0,g.jsx)("label",{htmlFor:"bookingFor",children:"Booking For"})]})}),(0,g.jsx)("div",{className:"col-lg-5",children:(0,g.jsxs)("div",{className:"form-floating",children:[(0,g.jsx)("input",{type:"text",className:"form-control",id:"patientName",placeholder:"Patient's Name",defaultValue:y?P.name:"",disabled:!!y,readOnly:!!y,required:!0}),(0,g.jsx)("label",{htmlFor:"patientName",children:"Name"}),(0,g.jsx)("small",{className:"ml-1 text-danger invalid-feedback"})]})}),(0,g.jsx)("div",{className:"col-lg",children:(0,g.jsxs)("div",{className:"form-floating",children:[(0,g.jsxs)("select",{className:"form-select",id:"patientSex",defaultValue:P.sex,disabled:!!y,required:!0,children:[(0,g.jsx)("option",{value:"null",hidden:!0,children:"Select Gender..."}),Object.keys(i.booking_sex).map((function(e,t){return(0,g.jsx)("option",{value:e,children:h.Sex[e]},t)}))]}),(0,g.jsx)("label",{htmlFor:"patientSex",children:"Sex"}),(0,g.jsx)("small",{className:"ml-1 text-danger invalid-feedback"})]})})]})})})}),(0,g.jsx)("div",{className:"modal-footer py-1",children:(0,g.jsx)("button",{type:"button",className:"btn btn-sm btn-primary",onClick:(0,a.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),e.next=3,fetch("/api/registerbooking",{method:"POST",body:JSON.stringify({id:"b"+p.randomBytes(5).toString("hex").toUpperCase().substring(0,9),user_mobile_no:P.mobile_no,name:u()("#patientName").val(),sex:u()("#patientSex").val(),bed_type:C,booked_for:u()("#bookingFor").val(),registration_no:n.registration_no,status:"Requested"}),headers:{"content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){v(!1),m.default.push("/booking?id=".concat(e.id),"/booking")})).catch((function(e){return console.error(e)}));case 3:v(!1);case 4:case"end":return e.stop()}}),e)}))),children:"Confirm Booking"})})]})})}):null,d?(0,g.jsx)(b.Z,{}):null,(0,g.jsxs)("main",{className:"container",children:[(0,g.jsxs)("div",{className:"row",children:[(0,g.jsx)("div",{className:"col-12 col-md-5",children:(0,g.jsx)(l.default,{src:"/media/hospital-building-2.jpg",width:"390",height:"220",layout:"responsive",priority:!0})}),(0,g.jsxs)("div",{className:"col-12 col-md-7",children:[(0,g.jsx)("h3",{children:n.hospital_name}),(0,g.jsxs)("div",{className:"mt-4 d-grid gap-2",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("span",{className:"fw-light h5 me-2","data-bs-toggle":"tooltip","data-bs-placement":"bottom",title:"Type",children:(0,g.jsx)("i",{className:"bi bi-info-lg"})}),(0,g.jsx)("span",{className:"text-secondary",children:n.hospital_type})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("span",{className:"fw-light h6 me-2","data-bs-toggle":"tooltip","data-bs-placement":"bottom",title:"Address",children:(0,g.jsx)("i",{className:"bi bi-geo-alt-fill"})}),(0,g.jsx)("span",{className:"text-secondary",children:"".concat(n.address.street_address,", ").concat(n.address.district,", ").concat(n.address.division)})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("span",{className:"fw-light h6 me-2","data-bs-toggle":"tooltip","data-bs-placement":"bottom",title:"Contacts",children:(0,g.jsx)("i",{className:"bi bi-telephone-fill"})}),(0,g.jsx)("span",{className:"text-secondary",children:null==n.address.phone_no?n.address.mobile_no:null==n.address.mobile_no?n.address.phone_no:"".concat(n.address.mobile_no,", ").concat(n.address.phone_no)})]})]})]})]}),(0,g.jsxs)("div",{className:"mt-4",children:[(0,g.jsx)("h4",{children:"Book now"}),(0,g.jsx)("div",{className:"mt-2 mx-0 row row-cols-2 row-cols-md-3 row-cols-lg-4",children:["ward","special_ward","cabin","vip_cabin","icu","ccu","hdu","hfncu","emergency","covidu","extra"].map((function(e,t){return null==n.vacant_bed_log[e]?null:(0,g.jsx)("div",{className:" d-flex justify-content-center align-items-center col p-1 ",children:(0,g.jsxs)("button",{className:n.vacant_bed_log[e]<=5?0==n.vacant_bed_log[e]?"btn btn-outline-danger w-100 disabled":"btn btn-outline-warning text-dark w-100":"btn btn-outline-primary w-100","data-bs-toggle":P?"modal":null,"data-bs-target":P?"#bookingModal":null,onClick:function(){P?E(h.BedTypes[e]):m.default.push("".concat(h.Links.App.login,"?redirect=").concat(m.default.asPath),h.Links.App.login)},children:[e.replace("_"," ").toUpperCase(),(0,g.jsx)("span",{className:"d-block",children:n.vacant_bed_log[e]})]})},t)}))})]}),(0,g.jsxs)("div",{className:"mt-4 shadow rounded bg-white",children:[(0,g.jsxs)("nav",{className:"position-relative",children:[(0,g.jsxs)("div",{className:"nav nav-tabs justify-content-start justify-content-md-center",id:"nav-tab",role:"tablist",children:[(0,g.jsx)("a",{className:"nav-link border-0 mb-0 active","data-bs-toggle":"tab",href:"#nav-location",role:"tab","aria-selected":"false",children:"Location"}),(0,g.jsx)("a",{className:"nav-link border-0","data-bs-toggle":"tab",href:"#nav-description",role:"tab","aria-selected":"false",children:"Description"})]}),(0,g.jsxs)("div",{className:"form-check form-switch position-absolute top-0 end-0 ps-0 mt-2 me-2",style:{backgroundColor:"rgba(256, 256, 256, 0.85)",backdropFilter:"blur(8px)"},children:[(0,g.jsx)("input",{className:"form-check-input",type:"checkbox",role:"switch",id:"mode",onChange:function(e){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(t){e.target.checked?w(n.address.latitude&&n.address.longitude?"https://www.google.com/maps/embed/v1/directions?key="+x.env.NEXT_PUBLIC_GMAPS_KEY+"&origin="+t.coords.latitude+","+t.coords.longitude+"&destination="+n.address.latitude+","+n.address.longitude+"&mode=driving&units=metric":"https://www.google.com/maps/embed/v1/directions?key="+x.env.NEXT_PUBLIC_GMAPS_KEY+"&origin="+t.coords.latitude+","+t.coords.longitude+"&destination="+n.hospital_name.replace(/ /g,"+")+"&mode=driving&units=metric"):w(j)}),(function(e){return u()("#map").html(e.message)})):u()("#map").text("Your browser doesn't support geolocation. Try inputting manually.")}}),(0,g.jsx)("label",{className:"form-check-label font-monospace d-none d-md-inline-block",htmlFor:"mode",children:"Directions Mode"})]})]}),(0,g.jsxs)("div",{className:"tab-content",id:"nav-tabContent",children:[(0,g.jsx)("div",{className:"tab-pane fade active show",id:"nav-location",role:"tabpanel",children:(0,g.jsx)("div",{children:(0,g.jsx)("iframe",{id:"map",width:"100%",height:"450px",frameBorder:0,style:{border:"0"},allowFullScreen:!0,src:_})})}),(0,g.jsx)("div",{className:"tab-pane fade",id:"nav-description",role:"tabpanel",children:(0,g.jsx)("div",{className:"container py-3",children:null==n.description?"Not provided":n.description})})]})]})]})]})}},6767:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[hospital_registration_no]",function(){return n(4235)}])},4155:function(e){var t,n,a=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"===typeof setTimeout?setTimeout:o}catch(e){t=o}try{n="function"===typeof clearTimeout?clearTimeout:s}catch(e){n=s}}();var l,r=[],c=!1,d=-1;function u(){c&&l&&(c=!1,l.length?r=l.concat(r):d=-1,r.length&&m())}function m(){if(!c){var e=i(u);c=!0;for(var t=r.length;t;){for(l=r,r=[];++d<t;)l&&l[d].run();d=-1,t=r.length}l=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function p(){}a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];r.push(new h(e,t)),1!==r.length||c||i(m)},h.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=p,a.addListener=p,a.once=p,a.off=p,a.removeListener=p,a.removeAllListeners=p,a.emit=p,a.prependListener=p,a.prependOnceListener=p,a.listeners=function(e){return[]},a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},950:function(){},6601:function(){},9214:function(){},8623:function(){},7748:function(){},5568:function(){},6619:function(){},7108:function(){},2361:function(){},4616:function(){}},function(e){e.O(0,[790,675,385,835,774,888,179],(function(){return t=6767,e(e.s=t);var t}));var t=e.O();_N_E=t}]);