(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[593],{153:function(e,t,s){"use strict";var a,n=s(168),l=s(2568),r=s(6573),i=s.n(r),c=s(5893);t.Z=function(){return(0,c.jsx)("div",{className:"d-flex xd",style:{position:"fixed",height:"100vh",width:"100vw",background:"linear-gradient(0deg, rgba(72,216,217,0.7) 0%, rgba(52,58,64,0.9) 96%)",zIndex:1100,backdropFilter:"blur(3px)"},children:(0,c.jsx)(i(),{css:(0,l.css)(a||(a=(0,n.Z)(["\n\t\t\t\t\tmargin: auto auto;\n\t\t\t\t"]))),speedMultiplier:2,color:"white"})})}},6737:function(e,t,s){"use strict";s.r(t),s.d(t,{__N_SSP:function(){return b}});var a=s(5861),n=s(7757),l=s.n(n),r=s(9008),i=s(385),c=s(5675),o=s(7294),d=s(1664),m=s(9755),p=s.n(m),x=s(4598),u=s(153),h=s(9198),f=s.n(h),j=(s(7276),s(227)),N=s(1163),v=s(5893),b=!0;t.default=function(e){var t=e.retrievedData,s=(0,o.useState)(JSON.parse(t)),n=s[0],m=s[1],h=(0,o.useState)(!1),b=h[0],y=h[1],g=(0,o.useState)(!1),w=g[0],S=g[1],_=(0,o.useState)(!1),k=_[0],D=_[1],C=(0,o.useState)("Self"==(null===n||void 0===n?void 0:n.for)),F=C[0],T=C[1],I=(0,o.useState)(0),q=I[0],E=I[1],O=function(){var e,t=new Date,s=12-((new Date).getMonth()+1),a=[];for(e=n?Object.values(x.Days[null===n||void 0===n?void 0:n.doctor.schedule[q].day])[0]:0;t.getDay()!=e;)t.setDate(t.getDate()+1);for(;t.getMonth()!=s;)a.push(new Date(t.getTime())),t.setDate(t.getDate()+7);return a},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null===n||void 0===n?void 0:n.doctor.schedule[q].start_time,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===n||void 0===n?void 0:n.doctor.schedule[q].end_time,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:15,a=[];for(e=new Date(e),t=new Date(t);e.getTime()<=t.getTime()-60*s;){var l=e.getTime();a.push(new Date(l)),e.setMinutes(e.getMinutes()+s)}return a},A=(0,o.useState)(O()),M=A[0],z=A[1],L=(0,o.useState)(P()),R=L[0],V=L[1],Z=(0,o.useState)(n?new Date(n.time):null),G=Z[0],H=Z[1],Q=(0,o.useContext)(j.S).userContext;return(0,o.useEffect)((function(){if(Q){if(k)return H(null===n||void 0===n?void 0:n.time);z(O()),V(P())}else N.default.push("".concat(x.Links.App.login,"?redirect=").concat(N.default.asPath),x.Links.App.login)}),[q,k,Q]),console.log(n),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(r.default,{children:(0,v.jsx)("title",{children:"Appointment | Quick Hospitalization"})}),w?(0,v.jsx)(u.Z,{}):null,(0,v.jsxs)("main",{className:"container",children:[(0,v.jsxs)("form",{className:"",onSubmit:function(e){e.stopPropagation(),e.preventDefault()},children:[(0,v.jsx)("fieldset",{children:(0,v.jsxs)("div",{className:"form-floating d-print-none",children:[(0,v.jsx)("input",{type:"search",className:"form-control",id:"floatingInput",placeholder:"a67*D9f8*5",defaultValue:n?n.id:"",onKeyUp:function(){var e=(0,a.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"===t.key){e.next=2;break}return e.abrupt("return");case 2:return S(!0),e.next=5,fetch("/api/fetchappointment",{method:"GET",headers:{"content-type":"application/json","x-appointment-id":t.target.value}}).then((function(e){return e.json()})).then((function(e){S(!1),m(e.appointment),D(!1),e.appointment?y(!1):y(!0)})).catch((function(e){return console.error(e)}));case 5:S(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),(0,v.jsx)("label",{htmlFor:"id",children:"Appointment ID"})]})}),n?(0,v.jsx)("fieldset",{children:(0,v.jsxs)("div",{className:"row mx-0 bg-light mt-4",children:[(0,v.jsxs)("div",{className:"col-12 col-lg-5 d-flex flex-column justify-content-center align-items-center mt-3 mt-lg-0",children:[(0,v.jsx)("div",{className:"position-relative mt-3",style:{width:"200px",height:"200px"},children:(0,v.jsx)(c.default,{className:"m-auto",src:"https://api.qrserver.com/v1/create-qr-code/?data="+window.location.href+"?id=".concat(n.id,"&amp;size=200x200"),alt:"appointment qr code",layout:"fill",priority:!0})}),(0,v.jsxs)("p",{className:"m-3 px-2 d-grid",style:{overflowWrap:"break-word"},children:["To verify this appointment please visit\xa0",(0,v.jsx)("span",{className:"font-monospace",children:"www.quickhospitalization.org/appointment"}),"\xa0or\xa0",(0,v.jsx)("strong",{children:"scan the QR code."})]})]}),(0,v.jsxs)("div",{className:"col-12 col-lg-7 h-auto  card rounded-0 px-0 d-flex flex-column justify-content-center",children:[(0,v.jsx)("div",{className:"card-header h5 text-center",children:"Appointment Info"}),(0,v.jsxs)("div",{className:"card-body",children:[(0,v.jsxs)("div",{className:"row mx-0 row-cols-1 row-cols-sm-2 border border-primary rounded",children:[(0,v.jsxs)("div",{className:"col px-2 py-1",children:[(0,v.jsx)("small",{className:"text-secondary",children:"ID:\xa0"}),(0,v.jsx)("span",{className:"font-monospace",children:n.id})]}),(0,v.jsxs)("div",{className:"col px-2 py-1",children:[(0,v.jsx)("small",{className:"text-secondary",children:"Status:\xa0"}),(0,v.jsx)("span",{className:"fst-italic",children:n.status})]}),k?(0,v.jsx)("div",{className:"col px-2 py-1",children:(0,v.jsxs)("div",{className:"form-floating",children:[(0,v.jsx)("select",{className:"form-select",id:"appointmentFor",onInput:function(e){e.target.value==i.appointment_for.Self?(T(!0),p()("#patientSex").val(n.sex),p()("#patientName").val(Q.name)):T(!1)},defaultValue:n.for,required:!0,children:Object.keys(i.appointment_for).map((function(e,t){return(0,v.jsx)("option",{value:i.appointment_for[e],children:i.appointment_for[e]},t)}))}),(0,v.jsx)("label",{htmlFor:"appointmentFor",children:"Appointment For"})]})}):n.for!=i.appointment_for.Self?(0,v.jsxs)("div",{className:"col px-2 py-1",children:[(0,v.jsx)("small",{className:"text-secondary",children:"Appointment For:\xa0"}),(0,v.jsx)("span",{className:"",children:n.for})]}):null,k?(0,v.jsx)("div",{className:"col px-2 py-1",children:(0,v.jsxs)("div",{className:"form-floating",children:[(0,v.jsx)("input",{type:"text",className:"form-control",id:"patientName",placeholder:"Patient's Name",defaultValue:n.name,disabled:!!F,readOnly:!!F,required:!0}),(0,v.jsx)("label",{htmlFor:"patientName",children:"Patient Name"}),(0,v.jsx)("small",{className:"ml-1 text-danger invalid-feedback"})]})}):(0,v.jsxs)("div",{className:"col px-2 py-1",children:[(0,v.jsx)("small",{className:"text-secondary",children:"Patient Name:\xa0"}),(0,v.jsx)("span",{className:"fw-bold",children:n.name})]}),k?(0,v.jsx)("div",{className:"col px-2 py-1",children:(0,v.jsxs)("div",{className:"form-floating",children:[(0,v.jsxs)("select",{className:"form-select",id:"patientSex",defaultValue:F?Q.sex:n.sex,disabled:!!F,required:!0,children:[(0,v.jsx)("option",{value:"null",hidden:!0,children:"Select Gender..."}),Object.keys(i.appointment_sex).map((function(e,t){return(0,v.jsx)("option",{value:e,children:x.Sex[e]},t)}))]}),(0,v.jsx)("label",{htmlFor:"patientSex",children:"Sex"}),(0,v.jsx)("small",{className:"ml-1 text-danger invalid-feedback"})]})}):(0,v.jsxs)("div",{className:"col px-2 py-1",children:[(0,v.jsx)("small",{className:"text-secondary",children:"Sex:\xa0"}),(0,v.jsx)("span",{className:"",children:x.Sex[n.sex]})]}),(0,v.jsxs)("div",{className:"col px-2 py-1",children:[(0,v.jsx)("small",{className:"text-secondary",children:"Mobile:\xa0"}),(0,v.jsx)("span",{className:"",children:n.user_mobile_no})]}),k?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{className:"col-12 px-2 py-1",children:[(0,v.jsx)("label",{htmlFor:"doctorSchedule",className:"text-secondary",children:"Schedule"}),(0,v.jsx)("div",{className:"btn-group d-block animate__animated animate__fadeIn animate__zoomIn ",id:"doctorSchedule",role:"group",children:null===n||void 0===n?void 0:n.doctor.schedule.map((function(e,t){return(0,v.jsxs)(o.Fragment,{children:[(0,v.jsx)("input",{type:"radio",className:"btn-check",name:"btnScheduleRadio",id:"schedule"+t,autoComplete:"off",defaultChecked:!!Object.keys(x.Days[e.day])[0].includes(new Date(n.time).toString().substring(0,3))}),(0,v.jsxs)("label",{htmlFor:"schedule"+t,className:t%2==0?"btn btn-sm mx-0 my-1 rounded-0 btn-outline-secondary":"btn btn-sm mx-0 my-1 rounded-0 btn-outline-dark",onClick:function(){E(t),H(null)},children:[(0,v.jsx)("span",{className:"d-block text-center",children:Object.keys(x.Days[e.day])}),(0,v.jsx)("small",{className:"d-inline",children:new Date(e.start_time).toLocaleTimeString([],{timeStyle:"short"})})," - ",(0,v.jsx)("small",{className:"d-inline",children:new Date(e.end_time).toLocaleTimeString([],{timeStyle:"short"})})]})]},t)}))})]}),(0,v.jsxs)("div",{className:"col-12 px-2 py-1",children:[(0,v.jsx)("label",{htmlFor:"dateTime",className:"text-secondary d-block",children:"Date & Time"}),-1!=q?(0,v.jsx)(f(),{className:"form-control",id:"dateTime",placeholderText:"Select date and time",autoComplete:"off",onChange:function(e){return H(e)},selected:G,dateFormat:"dd-MM-yyyy | p",showTimeSelect:!0,includeTimes:R,timeIntervals:15,useWeekdaysShort:!0,calendarStartDay:6,includeDates:M,wrapperClassName:"clamp-mw-50",required:!0}):null]})]}):(0,v.jsxs)("div",{className:"col px-2 py-1",children:[(0,v.jsx)("small",{className:"text-secondary",children:"Date:\xa0"}),(0,v.jsx)("span",{className:"fw-bold",children:function(){var e=new Date(n.time).toLocaleString("en-GB").replace(/\//g,"-"),t=new Date(n.time).toLocaleString("en-US");return e.substring(0,e.length-10)+" | "+t.substring(t.length-11,t.length-6)+t.substring(t.length,t.length-3)}()})]})]}),(0,v.jsxs)("div",{className:"row mx-0 row-cols-1 row-cols-sm-2 border border-secondary rounded mt-2",children:[(0,v.jsxs)("div",{className:"col px-2 py-1",children:[(0,v.jsx)("small",{className:"text-secondary",children:"Doctor Name:\xa0"}),(0,v.jsx)("span",{className:"",children:(0,v.jsx)(d.default,{href:"/doctor/".concat(n.doctor.email),children:(0,v.jsx)("a",{className:"text-decoration-none",children:n.doctor.name})})})]}),(0,v.jsxs)("div",{className:"col px-2 py-1",children:[(0,v.jsx)("small",{className:"text-secondary",children:"Specification:\xa0"}),(0,v.jsx)("span",{className:"fw-bold",children:n.doctor.specialization})]}),(0,v.jsxs)("div",{className:"col px-2 py-1",children:[(0,v.jsx)("small",{className:"text-secondary",children:"Department:\xa0"}),(0,v.jsx)("span",{className:"fw-bold",children:n.doctor.department.replace(/_/g," ")})]}),n.doctor.chamber?(0,v.jsxs)("div",{className:"col px-2 py-1",children:[(0,v.jsx)("small",{className:"text-secondary",children:"Chamber:\xa0"}),(0,v.jsx)("span",{className:"fw-bold",children:n.doctor.chamber})]}):null]}),(0,v.jsxs)("div",{className:"row mx-0 row-cols-1 border border-info rounded mt-2",children:[(0,v.jsxs)("div",{className:"col px-2 py-1",children:[(0,v.jsx)("small",{className:"text-secondary",children:"Hospital Name:\xa0"}),(0,v.jsx)("span",{className:"",children:(0,v.jsx)(d.default,{href:"/".concat(n.doctor.registration_no),children:(0,v.jsx)("a",{target:"_blank",className:"text-decoration-none",children:n.hospital.hospital_name})})})]}),(0,v.jsxs)("div",{className:"col px-2 py-1",children:[(0,v.jsx)("small",{className:"text-secondary",children:"Address:\xa0"}),(0,v.jsx)("span",{className:"fw-bold",children:"".concat(n.hospital.address.street_address,", ").concat(n.hospital.address.district,", ").concat(n.hospital.address.division)})]})]}),n.remarks?(0,v.jsxs)("div",{className:"border border-warning rounded mt-2 px-2 py-1",children:[(0,v.jsx)("small",{className:"text-secondary",children:"Remarks:\xa0"}),(0,v.jsx)("span",{className:"",children:n.remarks})]}):null]}),(0,v.jsx)("div",{className:"card-footer p-0",children:(0,v.jsxs)("div",{className:"btn-group btn-group-sm d-flex align-items-center d-print-none",role:"group","aria-label":"Controls",children:[k?null:(0,v.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){window.print()},children:"Print"}),"Requested"==n.status||"Confirmed"==n.status?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("button",{type:"button",className:k?"btn btn-outline-primary":"btn btn-outline-dark",onClick:function(){if(!k)return D(!0)},children:k?"Save":"Edit"}),(0,v.jsx)("button",{type:"button",className:"btn btn-outline-danger",onClick:function(){if(k)return D(!1)},children:"Cancel"})]}):null]})})]})]})}):null]}),b?(0,v.jsx)("div",{className:"text-center text-danger font-monospace m-4",children:"Invalid appointment ID"}):null]})]})}},1307:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/appointment",function(){return s(6737)}])}},function(e){e.O(0,[774,790,675,385,996,888,179],(function(){return t=1307,e(e.s=t);var t}));var t=e.O();_N_E=t}]);