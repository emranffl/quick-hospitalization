(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[882],{153:function(e,s,n){"use strict";var a,t=n(168),l=n(2568),r=n(6573),i=n.n(r),c=n(5893);s.Z=function(){return(0,c.jsx)("div",{className:"d-flex xd",style:{position:"fixed",height:"100vh",width:"100vw",background:"linear-gradient(0deg, rgba(72,216,217,0.7) 0%, rgba(52,58,64,0.9) 96%)",zIndex:1100,backdropFilter:"blur(3px)"},children:(0,c.jsx)(i(),{css:(0,l.css)(a||(a=(0,t.Z)(["\n\t\t\t\t\tmargin: auto auto;\n\t\t\t\t"]))),speedMultiplier:2,color:"white"})})}},9732:function(e,s,n){"use strict";n.r(s),n.d(s,{__N_SSP:function(){return f}});var a=n(5861),t=n(7757),l=n.n(t),r=n(385),i=n(9008),c=n(5675),o=n(1664),d=n(7294),x=n(4598),m=n(153),u=n(1163),p=n(227),h=n(5893),f=!0;s.default=function(e){var s=e.retrievedData,n=(0,d.useState)(JSON.parse(s)),t=n[0],f=n[1],j=(0,d.useState)(!1),N=j[0],b=j[1],g=(0,d.useState)(!1),v=g[0],y=g[1],k=(0,d.useState)(!1),w=k[0],_=k[1],S=(0,d.useContext)(p.S).userContext;return(0,d.useEffect)((function(){S||u.default.push("".concat(x.Links.App.login,"?redirect=").concat(u.default.asPath),x.Links.App.login)}),[S]),console.log(t),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(i.default,{children:(0,h.jsx)("title",{children:"Booking | Quick Hospitalization"})}),v?(0,h.jsx)(m.Z,{}):null,(0,h.jsxs)("main",{className:"container",children:[(0,h.jsxs)("form",{className:"",onSubmit:function(e){e.stopPropagation(),e.preventDefault()},children:[(0,h.jsx)("fieldset",{children:(0,h.jsxs)("div",{className:"form-floating d-print-none",children:[(0,h.jsx)("input",{type:"search",className:"form-control",id:"floatingInput",placeholder:"a67*D9f8*5",defaultValue:t?t.id:"",onKeyUp:function(){var e=(0,a.Z)(l().mark((function e(s){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"===s.key){e.next=2;break}return e.abrupt("return");case 2:return y(!0),e.next=5,fetch("/api/fetchbooking",{method:"GET",headers:{"content-type":"application/json","x-booking-id":s.target.value}}).then((function(e){return e.json()})).then((function(e){y(!1),f(e.appointment),_(!1),e.appointment?b(!1):b(!0)})).catch((function(e){return console.error(e)}));case 5:y(!1);case 6:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}()}),(0,h.jsx)("label",{htmlFor:"id",children:"Booking ID"})]})}),t?(0,h.jsx)("fieldset",{children:(0,h.jsx)("div",{className:"",children:(0,h.jsxs)("div",{className:"row mx-0 bg-light mt-4",children:[(0,h.jsxs)("div",{className:"col-12 col-lg-5 d-flex flex-column justify-content-center align-items-center mt-3 mt-lg-0",children:[(0,h.jsx)("div",{className:"position-relative mt-3",style:{width:"200px",height:"200px"},children:(0,h.jsx)(c.default,{className:"m-auto",src:"https://api.qrserver.com/v1/create-qr-code/?data="+window.location.href+"?id=".concat(t.id,"&amp;size=200x200"),alt:"booking qr code",layout:"fill",priority:!0})}),(0,h.jsxs)("p",{className:"m-3 px-2 d-grid",style:{overflowWrap:"break-word"},children:["To verify this booking please visit\xa0",(0,h.jsx)("span",{className:"font-monospace",children:"www.quickhospitalization.org/booking"}),"\xa0or\xa0",(0,h.jsx)("strong",{children:"scan the QR code."})]})]}),(0,h.jsxs)("div",{className:"col-12 col-lg-7 h-auto card rounded-0 px-0 d-flex flex-column justify-content-center",children:[(0,h.jsx)("div",{className:"card-header h5 text-center",children:"Booking Info"}),(0,h.jsxs)("div",{className:"card-body",children:[(0,h.jsxs)("div",{className:"row mx-0 row-cols-1 row-cols-sm-2 border border-primary rounded",children:[(0,h.jsxs)("div",{className:"col px-2 py-1",children:[(0,h.jsx)("small",{className:"text-secondary",children:"ID:\xa0"}),(0,h.jsx)("span",{className:"font-monospace",children:t.id})]}),(0,h.jsxs)("div",{className:"col px-2 py-1",children:[(0,h.jsx)("small",{className:"text-secondary",children:"Status:\xa0"}),(0,h.jsx)("span",{className:"fst-italic",children:t.status})]}),w?(0,h.jsx)("div",{className:"col px-2 py-1",children:(0,h.jsxs)("div",{className:"form-floating",children:[(0,h.jsx)("input",{type:"text",className:"form-control",id:"patientName",placeholder:"Patient's Name",defaultValue:t.name,required:!0}),(0,h.jsx)("label",{htmlFor:"patientName",children:"Patient Name"}),(0,h.jsx)("small",{className:"ml-1 text-danger invalid-feedback"})]})}):(0,h.jsxs)("div",{className:"col px-2 py-1",children:[(0,h.jsx)("small",{className:"text-secondary",children:"Patient Name:\xa0"}),(0,h.jsx)("span",{className:"fw-bold",children:t.name})]}),w?(0,h.jsx)("div",{className:"col px-2 py-1",children:(0,h.jsxs)("div",{className:"form-floating",children:[(0,h.jsxs)("select",{className:"form-select",id:"patientSex",required:!0,children:[(0,h.jsx)("option",{value:"null",hidden:!0,children:"Select Gender..."}),Object.keys(r.appointment_sex).map((function(e,s){return(0,h.jsx)("option",{value:e,children:x.Sex[e]},s)}))]}),(0,h.jsx)("label",{htmlFor:"patientSex",children:"Sex"}),(0,h.jsx)("small",{className:"ml-1 text-danger invalid-feedback"})]})}):(0,h.jsxs)("div",{className:"col px-2 py-1",children:[(0,h.jsx)("small",{className:"text-secondary",children:"Sex:\xa0"}),(0,h.jsx)("span",{className:"",children:x.Sex[t.sex]})]}),(0,h.jsxs)("div",{className:"col px-2 py-1",children:[(0,h.jsx)("small",{className:"text-secondary",children:"Mobile:\xa0"}),(0,h.jsx)("span",{className:"",children:t.user_mobile_no})]}),(0,h.jsxs)("div",{className:"col px-2 py-1",children:[(0,h.jsx)("small",{className:"text-secondary",children:"Booked At:\xa0"}),(0,h.jsx)("span",{className:"fw-bold",children:function(){var e=new Date(t.booked_at).toLocaleString("en-GB").replace(/\//g,"-"),s=new Date(t.booked_at).toLocaleString("en-US");return e.substring(0,e.length-10)+" | "+s.substring(s.length-11,s.length-6)+s.substring(s.length,s.length-3)}()})]})]}),(0,h.jsxs)("div",{className:"row mx-0 row-cols-1 border border-info rounded mt-2",children:[(0,h.jsxs)("div",{className:"col px-2 py-1",children:[(0,h.jsx)("small",{className:"text-secondary",children:"Hospital Name:\xa0"}),(0,h.jsx)("span",{className:"",children:(0,h.jsx)(o.default,{href:"/".concat(t.hospital.registration_no),children:(0,h.jsx)("a",{target:"_blank",className:"text-decoration-none",children:t.hospital.hospital_name})})})]}),(0,h.jsxs)("div",{className:"col px-2 py-1",children:[(0,h.jsx)("small",{className:"text-secondary",children:"Address:\xa0"}),(0,h.jsx)("span",{className:"fw-bold",children:"".concat(t.hospital.address.street_address,", ").concat(t.hospital.address.district,", ").concat(t.hospital.address.division)})]})]}),t.remarks?(0,h.jsxs)("div",{className:"border border-warning rounded mt-2 px-2 py-1",children:[(0,h.jsx)("small",{className:"text-secondary",children:"Remarks:\xa0"}),(0,h.jsx)("span",{className:"",children:t.remarks})]}):null]}),(0,h.jsx)("div",{className:"card-footer p-0",children:(0,h.jsxs)("div",{className:"btn-group btn-group-sm d-flex align-items-center d-print-none",role:"group","aria-label":"Controls",children:[w?null:(0,h.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){window.print()},children:"Print"}),"Requested"==t.status||"Booked"==t.status?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("button",{type:"button",className:w?"btn btn-outline-primary":"btn btn-outline-dark",onClick:function(){if(!w)return _(!0)},children:w?"Save":"Edit"}),(0,h.jsx)("button",{type:"button",className:"btn btn-outline-danger",onClick:function(){if(w)return _(!1)},children:"Cancel"})]}):null]})})]})]})})}):null]}),N?(0,h.jsx)("div",{className:"text-center text-danger font-monospace m-4",children:"Invalid booking ID"}):null]})]})}},2452:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/booking",function(){return n(9732)}])}},function(e){e.O(0,[790,675,385,774,888,179],(function(){return s=2452,e(e.s=s);var s}));var s=e.O();_N_E=s}]);