(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[222],{153:function(e,t,n){"use strict";var a,s=n(168),l=n(6312),i=n(6573),o=n.n(i),d=n(5893);t.Z=function(){return(0,d.jsx)("div",{className:"d-flex xd",style:{position:"fixed",height:"100vh",width:"100vw",background:"linear-gradient(0deg, rgba(72,216,217,0.7) 0%, rgba(52,58,64,0.9) 96%)",zIndex:1100,backdropFilter:"blur(3px)"},children:(0,d.jsx)(o(),{css:(0,l.css)(a||(a=(0,s.Z)(["\n\t\t\t\t\tmargin: auto auto;\n\t\t\t\t"]))),speedMultiplier:2,color:"white"})})}},8940:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return j}});var a=n(5861),s=n(7757),l=n.n(s),i=n(385),o=n(5675),d=n(9008),c=n(7294),r=n(1664),m=n(9755),u=n.n(m),h=n(4598),p=n(153),f=n(5835),x=n(1163),b=n(227),g=n(5893),j=!0;t.default=function(e){var t,n=e.doctorInfo,s=JSON.parse(n),m=(0,c.useState)(!1),j=m[0],N=m[1],v=(0,c.useState)(-1),_=v[0],w=v[1],k=function(){if(-1!=_){for(var e=new Date,t=((new Date).getMonth()+1)%12+1,n=[],a=Object.values(h.Days[s.schedule[_].day])[0];e.getDay()!=a;)e.setDate(e.getDate()+1);for(;e.getMonth()!=t;)n.push(new Date(e.getTime())),e.setDate(e.getDate()+7);return n}},y=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null===(e=s.schedule[_])||void 0===e?void 0:e.start_time,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===(t=s.schedule[_])||void 0===t?void 0:t.end_time,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30;if(-1!=_){var i=[];for(n=new Date(n),a=new Date(a);n.getTime()<=a.getTime()-60*l;){var o=n.getTime();i.push(new Date(o)),n.setMinutes(n.getMinutes()+l)}return i}},S=(0,c.useState)(0!=s.schedule.length?null===k||void 0===k?void 0:k():void 0),D=S[0],C=S[1],F=(0,c.useState)(0!=s.schedule.length?null===y||void 0===y?void 0:y():void 0),M=F[0],T=F[1],A=(0,c.useState)(null),O=A[0],I=A[1],P=(0,c.useState)(!1),L=P[0],U=(P[1],(0,c.useContext)(b.S).userContext),E=(0,c.useState)(null),H=E[0],R=E[1];return(0,c.useEffect)((function(){0!=s.schedule.length&&(C(k()),T(y())),U?fetch("/api/getuserappointmentlist",{method:"GET",headers:{"content-type":"application/json","x-user":U.mobile_no,"x-doctor":s.email}}).then((function(e){return e.json()})).then((function(e){return R(e.length>0)})).catch((function(e){return console.error(e)})):R(!1)}),[_]),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(d.default,{children:(0,g.jsx)("title",{children:s.name+" | Quick Hospitalization"})}),0!=s.schedule.length&&0==H&&U?(0,g.jsx)("section",{className:"modal fade",id:"appointmentModal",tabIndex:-1,"data-bs-backdrop":!1,"data-bs-keyboard":"false",children:(0,g.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-lg",children:(0,g.jsxs)("div",{className:"modal-content",style:{backgroundColor:"rgba(256, 256, 256, 0.85)",backdropFilter:"blur(8px)"},children:[(0,g.jsxs)("div",{className:"modal-header py-1",children:[(0,g.jsx)("h5",{className:"modal-title",children:"Appointment"}),(0,g.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),(0,g.jsx)("div",{className:"modal-body",children:(0,g.jsx)("form",{className:"appointment-form container",onSubmit:function(e){e.stopPropagation(),e.preventDefault()},children:(0,g.jsxs)("fieldset",{children:[(0,g.jsxs)("div",{className:"row g-2",children:[(0,g.jsx)("div",{className:"col-lg-7",children:(0,g.jsxs)("div",{className:"form-floating",children:[(0,g.jsx)("input",{type:"text",className:"form-control",id:"patientName",placeholder:"Patient's Name",defaultValue:L?U.name:"",disabled:!!L,readOnly:!!L,required:!0}),(0,g.jsx)("label",{htmlFor:"patientName",children:"Patient Name"}),(0,g.jsx)("small",{className:"ml-1 text-danger invalid-feedback"})]})}),(0,g.jsx)("div",{className:"col-lg",children:(0,g.jsxs)("div",{className:"form-floating",children:[(0,g.jsxs)("select",{className:"form-select",id:"patientSex",disabled:!!L,required:!0,children:[(0,g.jsx)("option",{value:"null",hidden:!0,children:"Select Gender..."}),Object.keys(i.appointment_sex).map((function(e,t){return(0,g.jsx)("option",{value:e,children:h.Sex[e]},t)}))]}),(0,g.jsx)("label",{htmlFor:"patientSex",children:"Sex"}),(0,g.jsx)("small",{className:"ml-1 text-danger invalid-feedback"})]})})]}),(0,g.jsx)("label",{htmlFor:"doctorSchedule",className:"text-secondary mt-2",children:"Schedule"}),(0,g.jsx)("div",{className:"btn-group d-block animate__animated animate__fadeInUp",id:"doctorSchedule",role:"group",children:s.schedule.map((function(e,t){return(0,g.jsxs)(c.Fragment,{children:[(0,g.jsx)("input",{type:"radio",className:"btn-check",name:"btnScheduleRadio",id:"schedule"+t,autoComplete:"off",defaultChecked:t==_}),(0,g.jsxs)("label",{htmlFor:"schedule"+t,className:t%2==0?"btn btn-sm mx-0 my-1 rounded-0 btn-outline-secondary":"btn btn-sm mx-0 my-1 rounded-0 btn-outline-dark",onClick:function(){w(t),I(null),u()("#confirmAppointment").hasClass("disabled")||u()("#confirmAppointment").addClass("disabled")},children:[(0,g.jsx)("span",{className:"d-block text-center",children:Object.keys(h.Days[e.day])}),(0,g.jsx)("small",{className:"d-inline",children:new Date(e.start_time).toLocaleTimeString([],{timeStyle:"short"})})," - ",(0,g.jsx)("small",{className:"d-inline",children:new Date(e.end_time).toLocaleTimeString([],{timeStyle:"short"})})]})]},t)}))}),D?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("label",{htmlFor:"dateSelection",className:"text-secondary mt-2 d-block",children:"Select Date"}),(0,g.jsx)("div",{className:"my-2 d-flex flex-wrap gap-1 animate__animated animate__fadeInUp",id:"dateSelection",role:"group",children:D.map((function(e,t){return(0,g.jsxs)(c.Fragment,{children:[(0,g.jsx)("input",{type:"radio",name:"btnDateRadio",className:"btn-check",id:"date"+t}),(0,g.jsx)("label",{className:t%2==0?"btn btn-sm shadow-sm border rounded-2 font-monospace btn-outline-dark":"btn btn-sm shadow-sm border rounded-2 font-monospace btn-outline-secondary",htmlFor:"date"+t,onClick:function(){var t=e;u()("#timeSelection").children("input[type=radio]").is(":checked")&&u()("#timeSelection").children("input[type=radio]").map((function(e,n){u()(n).is(":checked")&&(t=new Date(t.setHours(new Date(u()(n).attr("data-time")).getHours())),t=new Date(t.setMinutes(new Date(u()(n).attr("data-time")).getMinutes())))})),I(t)},children:e.toLocaleDateString("en-GB").replace(/\//g,"-")})]},t)}))})]}):null,O?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("label",{htmlFor:"timeSelection",className:"text-secondary mt-2 d-block",children:"Select Time"}),(0,g.jsx)("div",{className:"my-1 d-flex flex-wrap gap-1 animate__animated animate__fadeInUp",id:"timeSelection",role:"group",children:null===M||void 0===M?void 0:M.map((function(e,t){var n=e.toLocaleTimeString("en-US");return n=n.substring(0,n.length-6)+n.substring(n.length-3,n.length),(0,g.jsxs)(c.Fragment,{children:[(0,g.jsx)("input",{type:"radio",name:"btnTimeRadio",className:"btn-check",id:"time"+t,"data-time":e.toISOString()}),(0,g.jsx)("label",{className:t%2==0?"btn btn-sm shadow-sm border rounded-2 font-monospace btn-outline-secondary":"btn btn-sm shadow-sm border rounded-2 font-monospace btn-outline-dark",htmlFor:"time"+t,onClick:function(){var t;new Date(O.setHours(e.getHours())),t=new Date(O.setMinutes(e.getMinutes())),I(t),u()("#confirmAppointment").removeClass("disabled")},children:n})]},t)}))})]}):null]})})}),(0,g.jsx)("div",{className:"modal-footer py-1",children:(0,g.jsx)("button",{type:"button",className:"btn btn-sm btn-primary disabled",id:"confirmAppointment",onClick:(0,a.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N(!0),e.next=3,fetch("/api/registerappointment",{method:"POST",body:JSON.stringify({id:"a"+f.randomBytes(5).toString("hex").toUpperCase().substring(0,9),user_mobile_no:U.mobile_no,name:null===(t=u()("#patientName").val())||void 0===t?void 0:t.toString().trim(),sex:u()("#patientSex").val(),doctor_id:s.id,time:O,status:"Requested",registration_no:s.registration_no}),headers:{"content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){N(!1),x.default.push("/appointment?id=".concat(e.id),"/appointment")})).catch((function(e){return console.error(e)}));case 3:N(!1);case 4:case"end":return e.stop()}}),e)}))),children:"Confirm Appointment"})})]})})}):null,j?(0,g.jsx)(p.Z,{}):null,(0,g.jsxs)("main",{className:"container doctor",children:[(0,g.jsxs)("div",{className:"row flex-column-reverse flex-lg-row",children:[(0,g.jsx)("div",{className:"col-12 col-lg-7 d-flex justify-content-start align-items-center info h-auto",children:(0,g.jsxs)("div",{className:"ms-2 ms-sm-5 my-3 text-white",children:[(0,g.jsxs)("span",{className:"fw-light",children:[(0,g.jsx)("i",{className:"bi bi-geo-alt m-0 h6"}),"\xa0",(0,g.jsx)("small",{className:"font-monospace",children:s.hospital.address.district})]}),(0,g.jsxs)("h2",{className:"mt-3",children:[s.name,"\xa0",(0,g.jsx)("span",{className:"text-info","data-bs-toggle":"tooltip","data-bs-placement":"bottom",title:"M"==s.sex||"T"==s.sex?"Male":"Female",children:(0,g.jsx)("i",{className:"M"==s.sex||"T"==s.sex?"bi bi-gender-male m-0":"bi bi-gender-female m-0"})})]}),(0,g.jsx)("span",{className:"d-block h6 fst-italic fw-light mb-4",children:s.specialization}),(0,g.jsxs)("span",{className:"d-block h5",children:["Department:\xa0",(0,g.jsx)("small",{className:"fst-italic fw-light",children:s.department})]}),(0,g.jsxs)("span",{className:"d-block h5",children:["Hospital:\xa0",(0,g.jsx)(r.default,{href:h.Links.App.home+s.registration_no,children:(0,g.jsx)("a",{className:"text-info",target:"_blank",children:(0,g.jsx)("small",{className:"fst-italic fw-light",children:s.hospital.hospital_name})})})]}),null==s.chamber?null:(0,g.jsxs)("span",{className:"d-block h5",children:["Chamber:\xa0",(0,g.jsx)("small",{className:"fst-italic fw-light",children:s.chamber})]}),0!=s.schedule.length&&null!=H?H?(0,g.jsx)(r.default,{href:h.Links.App.User.appointments,children:(0,g.jsx)("button",{className:"btn btn-outline-light rounded-pill mt-3 fw-light animate__animated animate__fadeInUp",children:"View Appointment"})}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("span",{className:"d-block h5 mt-2 ",children:["Appointment Count:\xa0",(0,g.jsx)("small",{className:"fst-italic fw-light",children:s._count.appointment})]}),(0,g.jsx)("button",{className:"btn btn-outline-light rounded-pill mt-3 fw-light animate__animated animate__fadeInUp","data-bs-toggle":U?"modal":null,"data-bs-target":U?"#appointmentModal":null,onClick:function(){!U&&x.default.push("".concat(h.Links.App.login,"?redirect=").concat(x.default.asPath),h.Links.App.login)},children:"Make An Appointment"})]}):null]})}),(0,g.jsx)("div",{className:"col-12 col-lg-5 d-flex mt-3 mt-lg-0",children:(0,g.jsx)(o.default,{className:"m-auto",src:"M"==s.sex||"T"==s.sex?"/media/doctor-profile-male.png":"/media/doctor-profile-female.png",alt:"M"==s.sex||"T"==s.sex?"doctor-profile-male - doctor image":"doctor-profile-female - doctor image",width:576,height:576,priority:!0})})]}),(0,g.jsxs)("div",{className:"container-fluid my-5",children:[(0,g.jsx)("h3",{className:"",children:"Bio"}),(0,g.jsx)("p",{className:"fw-light",children:null!==(t=s.bio)&&void 0!==t?t:"Not Provided"})]})]})]})}},8901:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/doctor/[doctor_email]",function(){return n(8940)}])},950:function(){},6601:function(){},9214:function(){},8623:function(){},7748:function(){},5568:function(){},6619:function(){},7108:function(){},2361:function(){},4616:function(){}},function(e){e.O(0,[790,675,385,835,774,888,179],(function(){return t=8901,e(e.s=t);var t}));var t=e.O();_N_E=t}]);