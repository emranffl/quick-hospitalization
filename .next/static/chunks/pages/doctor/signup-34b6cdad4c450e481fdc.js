(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[619],{6150:function(e,t,n){"use strict";n.d(t,{C:function(){return l},O:function(){return c}});var r=n(5861),a=n(7757),s=n.n(a),i={send:function(e){return new Promise((function(t,n){e.nocache=Math.floor(1e6*Math.random()+1),e.Action="Send";var r=JSON.stringify(e);i.ajaxPost("https://smtpjs.com/v3/smtpjs.aspx?",r,(function(e){t(e)}))}))},ajaxPost:function(e,t,n){var r=i.createCORSRequest("POST",e);r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.onload=function(){var e=r.responseText;null!=n&&n(e)},r.send(t)},ajax:function(e,t){var n=i.createCORSRequest("GET",e);n.onload=function(){var e=n.responseText;null!=t&&t(e)},n.send()},createCORSRequest:function(e,t){var n=new XMLHttpRequest;return"withCredentials"in n?n.open(e,t,!0):"undefined"!=typeof XDomainRequest?(n=new XDomainRequest).open(e,t):n=null,n}},o=n(4155),l=function(){var e=(0,r.Z)(s().mark((function e(t,n,r){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(t,n,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),c=function(){var e=(0,r.Z)(s().mark((function e(t,n,r){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(t,n,"This email is automatically generated from internal system of Quick Hospitalization, do not reply. \n            Your OTP is: ".concat(r,". If you haven't requested for the OTP, take necessary steps immediately!"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),d=function(){var e=(0,r.Z)(s().mark((function e(t,n,r){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.send({Host:o.env.NEXT_PUBLIC_MAIL_SERVER_HOST,Username:o.env.NEXT_PUBLIC_MAIL_SERVER_USERNAME,Password:o.env.NEXT_PUBLIC_MAIL_SERVER_PASSWORD,From:o.env.NEXT_PUBLIC_MAIL_SERVER_USERNAME,To:t,Subject:n,Body:r});case 2:if("OK"!==e.sent){e.next=7;break}return e.abrupt("return",!0);case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()},5692:function(e,t,n){"use strict";n.d(t,{F:function(){return s}});var r=n(9249);n(733);r.Am.configure();var a={warning:"tomato",danger:"red",primary:"#007BFF"},s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"primary",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4e3;(0,r.Am)(e,{autoClose:n,position:r.Am.POSITION.BOTTOM_RIGHT,style:{backgroundColor:a[t],backdropFilter:"blur(3px)",boxShadow:"0 .5rem 1rem rgba(0,0,0,0.75)!important"},bodyClassName:"text-light",bodyStyle:{font:"status-bar"},hideProgressBar:!0})}},2695:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}});var r=n(4942),a=n(5861),s=n(5785),i=n(7757),o=n.n(i),l=n(9008),c=n(7294),d=n(9755),u=n.n(d),m=n(6150),p=n(5692),f=n(1664),h=n(4598),x=n(385),b=n(1163),v=n(5893);function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=function(){var e=(0,c.useState)(0),t=e[0],n=e[1],r=function(e){var n=u()("fieldset");u()(n[e]).removeClass("d-none"),e>=2?u()("#prevBtn").removeClass("d-none"):u()("#prevBtn").addClass("d-none"),e==n.length-1?u()("#nextBtn").text("Sign UP"):0!=e&&u()("#nextBtn").text("Continue"),function(e){var n,r=u()(".step");for(n=0;n<t;n++)u()(r[n]).removeClass("bg-primary"),u()(r[n]).addClass("complete");t<=e?u()(r[e]).addClass("bg-primary"):u()(r[e]).removeClass("bg-primary")}(e)},i=function(e){var a=u()("fieldset");u()(a[t]).addClass("d-none"),n(t+=e),t>=a.length&&(u()("#title").addClass("d-none"),u()("#stepButtons").addClass("d-none"),u()("#stepIndicator").addClass("d-none"),u()("#successMessage").removeClass("d-none")),r(t)},d=(0,c.useState)(null),j=d[0],y=d[1],N=(0,c.useState)(null),S=N[0],k=N[1],w=(0,c.useState)(1),O=w[0],C=w[1],E=(0,c.useState)([]),_=E[0],P=E[1],T=function(){return(0,s.Z)(new Set((0,s.Z)(u()("#schedules").find("input[name=day]").map((function(e,t){if(u()(t).is(":checked"))return u()(t).val()})))))},I=(0,c.useState)([]),F=I[0],R=I[1],A=function(e){var t=(0,c.useRef)();return(0,c.useEffect)((function(){t.current=e})),t.current}(O);return(0,c.useEffect)((function(){P(T())}),[]),(0,c.useEffect)((function(){A>O&&P(T())}),[_,O]),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(l.default,{children:(0,v.jsx)("title",{children:"Doctor Signup | Quick Hospitalization"})}),(0,v.jsx)("main",{children:(0,v.jsx)("div",{className:"container my-5",children:(0,v.jsx)("div",{className:"row d-flex justify-content-center align-items-center",children:(0,v.jsx)("div",{className:"col-md-6",children:(0,v.jsxs)("form",{className:"rounded p-4 p-lg-5 bg-light",onSubmit:function(e){e.preventDefault(),e.stopPropagation()},children:[(0,v.jsx)("h2",{id:"title",children:"Doctor Sign Up"}),(0,v.jsxs)("div",{className:"d-flex gap-2 justify-content-center align-items-center my-5",id:"stepIndicator",children:[(0,v.jsx)("span",{className:"step d-inline-block rounded bg-primary"}),(0,v.jsx)("span",{className:"step d-inline-block rounded"}),(0,v.jsx)("span",{className:"step d-inline-block rounded"})]}),(0,v.jsxs)("fieldset",{children:[(0,v.jsxs)("div",{className:"form-floating",children:[(0,v.jsx)("input",{type:"email",className:"form-control","data-parent":"doctor",id:"email",placeholder:"E.g.: example@domain.com"}),(0,v.jsx)("label",{htmlFor:"email",children:"Work Email *"})]}),(0,v.jsx)("small",{className:"text-danger",id:"emailErr"}),j?(0,v.jsxs)("div",{className:"d-non mt-3",id:"otpBlock",children:[(0,v.jsx)("h6",{className:"text-center mt-4 mb-3",children:"OTP has been sent to your email. Enter it here..."}),(0,v.jsxs)("div",{className:"d-flex justify-content-center",children:[(0,v.jsx)("input",{type:"number",className:"form-control",id:"d1",onInput:function(e){e.target.value=e.target.value.substring(0,1),u()("#d2").trigger("focus")}}),(0,v.jsx)("input",{type:"number",className:"form-control",id:"d2",onInput:function(e){e.target.value=e.target.value.substring(0,1),u()("#d3").trigger("focus")}}),(0,v.jsx)("input",{type:"number",className:"form-control",id:"d3",onInput:function(e){e.target.value=e.target.value.substring(0,1),u()("#d4").trigger("focus")}}),(0,v.jsx)("input",{type:"number",className:"form-control",id:"d4",onInput:function(e){e.target.value=e.target.value.substring(0,1),(null===j||void 0===j?void 0:j.toString())!=u()("#d1").val()+u()("#d2").val()+u()("#d3").val()+u()("#d4").val()?(u()("#otpErr").text("Invalid OTP!"),u()("#nextBtn").addClass("disabled")):(u()("#otpErr").text(""),u()("#nextBtn").removeClass("disabled"))}})]}),(0,v.jsx)("small",{className:"text-danger text-center d-block mt-2",id:"otpErr"})]}):null]}),(0,v.jsxs)("fieldset",{className:"d-none",children:[(0,v.jsxs)("div",{className:"form-floating mb-2",children:[(0,v.jsx)("input",{type:"text",className:"form-control disabled",id:"id",placeholder:"d123456789",defaultValue:null===S||void 0===S?void 0:S.id,readOnly:!0}),(0,v.jsx)("label",{htmlFor:"id",children:"ID"})]}),(0,v.jsxs)("div",{className:"form-floating mb-2",children:[(0,v.jsx)("input",{type:"text",className:"form-control disabled",id:"hospitalName",placeholder:"United Hospital Ltd.",defaultValue:null===S||void 0===S?void 0:S.hospital.hospital_name,readOnly:!0}),(0,v.jsx)("label",{htmlFor:"hospitalName",children:"Hospital Name"})]}),(0,v.jsxs)("div",{className:"form-floating mb-2",children:[(0,v.jsx)("input",{type:"text",className:"form-control",id:"name",placeholder:"E.g.: Alice Milburn",onInput:function(e){return e.target.value=e.target.value.slice(0,50)},required:!0}),(0,v.jsx)("label",{htmlFor:"name",children:"Name *"})]}),(0,v.jsx)("small",{className:"text-danger",id:"nameErr"}),(0,v.jsxs)("div",{className:"form-floating mb-2",children:[(0,v.jsxs)("select",{className:"form-select",id:"sex",required:!0,children:[(0,v.jsx)("option",{hidden:!0,children:"Select Gender..."}),Object.values(x.doctor_sex).map((function(e,t){return(0,v.jsx)("option",{value:e,children:h.Sex[e]},t)}))]}),(0,v.jsx)("label",{htmlFor:"sex",children:"Sex *"})]}),(0,v.jsx)("small",{className:"text-danger",id:"sexErr"}),(0,v.jsxs)("div",{className:"form-floating mb-2",children:[(0,v.jsxs)("select",{className:"form-select",id:"department",required:!0,children:[(0,v.jsx)("option",{hidden:!0,children:"Select Department..."}),Object.values(x.doctor_department).map((function(e,t){return(0,v.jsx)("option",{value:e,children:e.replace(/_/g," ")},t)}))]}),(0,v.jsx)("label",{htmlFor:"department",children:"Department *"})]}),(0,v.jsx)("small",{className:"text-danger",id:"departmentErr"}),(0,v.jsxs)("div",{className:"form-floating mb-2",children:[(0,v.jsx)("input",{type:"text",className:"form-control disabled",id:"specialization",placeholder:"E.g.: MSc, FCPS, MBBS",onInput:function(e){return e.target.value=e.target.value.slice(0,512)},required:!0}),(0,v.jsx)("label",{htmlFor:"specialization",children:"Specialization *"})]}),(0,v.jsx)("small",{className:"text-danger",id:"specializationErr"}),(0,v.jsxs)("div",{className:"form-floating mb-2",children:[(0,v.jsx)("input",{type:"text",className:"form-control disabled",id:"chamber",placeholder:"E.g.: D28",onInput:function(e){return e.target.value=e.target.value.slice(0,10)}}),(0,v.jsx)("label",{htmlFor:"chamber",children:"Chamber $"})]}),(0,v.jsx)("small",{className:"text-danger",id:"chamberErr"}),(0,v.jsxs)("div",{className:"form-floating mb-2",children:[(0,v.jsx)("textarea",{className:"form-control",id:"bio",onInput:function(e){return e.target.value=e.target.value.slice(0,16383)}}),(0,v.jsx)("label",{htmlFor:"bio",children:"Bio $"})]}),(0,v.jsx)("small",{className:"text-danger",id:"bioErr"}),(0,v.jsxs)("div",{className:"form-floating mb-2",children:[(0,v.jsx)("input",{type:"text",className:"form-control disabled",id:"password",placeholder:"4 - 25 characters",required:!0}),(0,v.jsx)("label",{htmlFor:"password",children:"Password *"})]}),(0,v.jsx)("small",{className:"text-danger",id:"passwordErr"})]}),(0,v.jsxs)("fieldset",{className:"d-none",children:[(0,v.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,v.jsx)("h4",{children:"Select Schedule"}),7!=_.length?(0,v.jsx)("i",{className:"bi bi-calendar-plus-fill h5 text-primary","data-bs-toggle":"tooltip","data-bs-placement":"bottom",title:"Add New Schedule",onClick:function(){C(++O),R(T())}}):null]}),(0,v.jsx)("div",{className:"mt-4",id:"schedules",children:(0,s.Z)(Array(O)).map((function(e,t){return(0,v.jsxs)("div",{className:"card mt-4 shadow schedule",children:[(0,v.jsxs)("div",{className:"card-header py-1 d-flex justify-content-between align-items-center",children:[(0,v.jsxs)("h6",{className:"mb-0",children:["Schedule - ",t+1]}),0!=t?(0,v.jsx)("i",{className:"bi bi-x-square-fill h5 text-danger mb-0",onClick:function(){C(--O)}}):null]}),(0,v.jsx)("div",{className:"card-body d-flex flex-wrap gap-1 justify-content-lg-between",children:0==t?Object.values(h.Days).map((function(e,n){return(0,v.jsxs)("div",{children:[(0,v.jsx)("input",{type:"checkbox",className:"btn-check",id:"btnCheck".concat(t).concat(n),name:"day",value:Object.keys(h.Days)[n],autoComplete:"off",defaultChecked:n==t,onClick:function(e){P(T()),t+1!=O&&C(t+1)}}),(0,v.jsx)("label",{className:t%2==0?"btn btn-outline-dark p-2":"btn btn-outline-secondary p-2",style:{fontSize:"0.8rem"},htmlFor:"btnCheck".concat(t).concat(n),children:Object.keys(e).toString().substring(0,3).toUpperCase()})]},n)})):Object.values(x.schedule_day).map((function(e,n){return(0,v.jsxs)("div",{children:[(0,v.jsx)("input",{type:"checkbox",className:"btn-check",id:"btnCheck".concat(t).concat(n),name:"day",value:e,disabled:""==Object.values(x.schedule_day).filter((function(e){return!F.includes(e)})).filter((function(t){return t==e})).join()&&(t+1==O||A>O),autoComplete:"off",onClick:function(e){P(T()),t+1!=O&&C(t+1)}}),(0,v.jsx)("label",{className:t%2==0?"btn btn-outline-dark p-2":"btn btn-outline-secondary p-2",style:{fontSize:"0.8rem"},htmlFor:"btnCheck".concat(t).concat(n),children:Object.keys(h.Days[e]).toString().substring(0,3).toUpperCase()})]},n)}))}),(0,v.jsxs)("div",{className:"card-footer p-0 row row-cols-1 row-cols-lg-2 mx-0",children:[(0,v.jsxs)("div",{className:"col p-1 d-flex align-items-center",children:[(0,v.jsx)("label",{className:"me-2",htmlFor:"from".concat(t),children:"From:"}),(0,v.jsx)("input",{className:"form-control",type:"time",id:"from".concat(t),step:"600",defaultValue:"07:00"})]}),(0,v.jsxs)("div",{className:"col p-1 d-flex align-items-center",children:[(0,v.jsx)("label",{className:"me-2",htmlFor:"to".concat(t),children:"To:"}),(0,v.jsx)("input",{className:"form-control",type:"time",id:"to".concat(t),step:"600",defaultValue:"23:00"})]})]})]},t)}))})]}),(0,v.jsxs)("div",{className:"text-center text-success d-none",id:"successMessage",children:[(0,v.jsx)("i",{className:"bi bi-check2-all fs-1"}),(0,v.jsx)("h3",{className:"mt-4",children:"You have successfully signed up!"})]}),(0,v.jsxs)("div",{className:"mt-3 d-flex gap-1 justify-content-end",role:"group",id:"stepButtons",children:[(0,v.jsx)("button",{type:"button",className:"btn btn-sm btn-dark d-none",id:"prevBtn",onClick:function(){return i(-1)},children:(0,v.jsx)("i",{className:"bi bi-arrow-left"})}),(0,v.jsx)("button",{type:"button",className:"btn btn-sm btn-primary",id:"nextBtn",onClick:function(){var e=(0,a.Z)(o().mark((function e(n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=g(g(g({name:u()("#name").val(),sex:u()("#sex").val(),department:u()("#department").val(),specialization:u()("#specialization").val()},""==u()("#bio").val()?null:{bio:u()("#bio").val()}),""==u()("#chamber").val()?null:{chamber:u()("#chamber").val()}),{},{password:u()("#password").val()}),console.log(t),0!=t||"Send OTP"!=n.currentTarget.innerText){e.next=7;break}return e.next=5,fetch("/api/doctorsignup",{method:"GET",headers:{"content-type":"application/json",email:u()("#email").val(),step:t.toString()}}).then((function(e){return e.json()})).then(function(){var e=(0,a.Z)(o().mark((function e(t){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),!t.message){e.next=3;break}return e.abrupt("return",u()("#emailErr").text(t.message));case 3:return u()("#emailErr").text(""),u()(n.target).addClass("disabled"),r=Math.floor(8998*Math.random()+1001),console.log(r),y(r),u()(n.target).text("Continue"),k(t),e.next=12,(0,m.O)(u()("#email").val(),"Doctor Signup Email Verification",r);case 12:if(!e.sent){e.next=18;break}y(r),k(t),u()(n.target).text("Continue"),e.next=19;break;case 18:(0,p.F)("Couldn't send OTP at the moment, please try again later.","danger",!1);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.error(e)}));case 5:e.next=19;break;case 7:if(0!=t||"Continue"!=n.currentTarget.innerText||(null===j||void 0===j?void 0:j.toString())!=u()("#d1").val()+u()("#d2").val()+u()("#d3").val()+u()("#d4").val()){e.next=11;break}i(1),e.next=19;break;case 11:if(1!=t){e.next=16;break}return e.next=14,fetch("/api/doctorsignup",{method:"POST",headers:{"content-type":"application/json",email:"emranffl4@gmail.com",step:t.toString()},body:JSON.stringify(r)}).then((function(e){return e.json()})).then(function(){var e=(0,a.Z)(o().mark((function e(t){var n,r,a,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.errors,r=t.inner,a=t.validated,s={name:!1,sex:!1,department:!1,specialization:!1,password:!1},n?r.map((function(e,t){"sex"==e.path?u()("#"+e.path+"Err").text("select a gender"):"department"==e.path?u()("#"+e.path+"Err").text("select a department"):u()("#"+e.path+"Err").text(e.message),s[e.path]=!0})):a&&i(1),Object.keys(s).map((function(e,t){s[e]||u()("#"+e+"Err").text("")}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.error(e)}));case 14:e.next=19;break;case 16:if(2!=t){e.next=19;break}return e.next=19,fetch("/api/doctorsignup",{method:"POST",headers:{"content-type":"application/json",email:u()("#email").val(),step:t.toString()},body:JSON.stringify(g(g({},r),{},{schedule:(0,s.Z)(u()("#schedules").children(".schedule").map((function(e,t){return(0,s.Z)(u()(t).find("input[name=day]").map((function(t,n){if(u()(n).is(":checked"))return{doctor_id:null===S||void 0===S?void 0:S.id,day:u()(n).val(),start_time:"1970-01-01 ".concat(u()("#from"+e).val()),end_time:"1970-01-01 ".concat(u()("#to"+e).val())}})))})))}))}).then((function(e){return e.json()})).then(function(){var e=(0,a.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.email&&b.default.replace("".concat(h.Links.Doctor.dashboard,"?doctor=").concat(t.email),h.Links.Doctor.dashboard);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.error(e)}));case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:"Send OTP"})]}),(0,v.jsxs)("div",{className:"d-flex gap-2 mt-2",children:[(0,v.jsx)("small",{className:"text-secondary",children:"* - required"}),(0,v.jsx)("small",{className:"text-secondary",children:"$ - optional"})]}),(0,v.jsx)("div",{className:"text-secondary mt-2 text-center",children:(0,v.jsxs)("small",{children:["Already have an account?",(0,v.jsx)(f.default,{href:h.Links.Doctor.login,children:(0,v.jsx)("a",{className:"text-decoration-none fw-bold",children:"\xa0Login"})})]})})]})})})})})]})}},1606:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/doctor/signup",function(){return n(2695)}])},5861:function(e,t,n){"use strict";function r(e,t,n,r,a,s,i){try{var o=e[s](i),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(r,a)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(a,s){var i=e.apply(t,n);function o(e){r(i,a,s,o,l,"next",e)}function l(e){r(i,a,s,o,l,"throw",e)}o(void 0)}))}}n.d(t,{Z:function(){return a}})},5785:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.d(t,{Z:function(){return a}})}},function(e){e.O(0,[385,477,774,888,179],(function(){return t=1606,e(e.s=t);var t}));var t=e.O();_N_E=t}]);